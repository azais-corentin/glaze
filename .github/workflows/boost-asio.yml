name: boost-asio

on:
   push:
      branches: ["main"]
   pull_request:
      branches: ["main"]

jobs:
   build:
      runs-on: ubuntu-latest

      steps:
         - uses: actions/checkout@v3

         - name: Install Boost
           uses: MarkusJx/install-boost@v2
           with:
              boost_version: 1.83.0

         - name: Configure CMake
           run: cmake -B build -DUSE_BOOST_ASIO=ON -Dglaze_BUILD_TESTS=ON -Dglaze_ENABLE_SSL=ON

         - name: Build
           run: cmake --build build

         - name: Test
           run: ctest --test-dir build
